/* Safari/iOS Compatibility Fixes for Cat Animation - ENHANCED VERSION */

/* Enhanced cat wrapper with Safari/iOS support + SPINNING ANIMATION */
.cat-image-wrapper {
    width: 160px;
    height: 160px;
    cursor: pointer;
    -webkit-transition: -webkit-transform var(--transition-fast);
    transition: transform var(--transition-fast);
    /* ADD CONTINUOUS SPINNING ANIMATION */
    -webkit-animation: catSpin 3s linear infinite;
    animation: catSpin 3s linear infinite;
    border-radius: 0 !important;
    overflow: visible !important;
    box-shadow: none !important;
    background: transparent !important;
    border: none !important;
    /* Force hardware acceleration for Safari/iOS */
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    will-change: transform;
    /* Force GPU rendering */
    -webkit-perspective: 1000;
    perspective: 1000;
}

/* CONTINUOUS SPINNING ANIMATION - This is what makes it spin! */
@-webkit-keyframes catSpin {
    0% {
        -webkit-transform: translate3d(0, 0, 0) rotate(0deg);
        transform: translate3d(0, 0, 0) rotate(0deg);
    }

    100% {
        -webkit-transform: translate3d(0, 0, 0) rotate(360deg);
        transform: translate3d(0, 0, 0) rotate(360deg);
    }
}

@keyframes catSpin {
    0% {
        -webkit-transform: translate3d(0, 0, 0) rotate(0deg);
        transform: translate3d(0, 0, 0) rotate(0deg);
    }

    100% {
        -webkit-transform: translate3d(0, 0, 0) rotate(360deg);
        transform: translate3d(0, 0, 0) rotate(360deg);
    }
}

/* Safari-specific keyframes for catIdle (bobbing up and down) */
@-webkit-keyframes catIdle {

    0%,
    100% {
        -webkit-transform: translate3d(0, 0, 0) scale(1);
        transform: translate3d(0, 0, 0) scale(1);
    }

    50% {
        -webkit-transform: translate3d(0, -5px, 0) scale(1.05);
        transform: translate3d(0, -5px, 0) scale(1.05);
    }
}

@keyframes catIdle {

    0%,
    100% {
        -webkit-transform: translate3d(0, 0, 0) scale(1);
        transform: translate3d(0, 0, 0) scale(1);
    }

    50% {
        -webkit-transform: translate3d(0, -5px, 0) scale(1.05);
        transform: translate3d(0, -5px, 0) scale(1.05);
    }
}

.cat-image-wrapper:hover {
    /* Speed up spinning on hover */
    -webkit-animation: catSpin 1s linear infinite;
    animation: catSpin 1s linear infinite;
    -webkit-transform: scale(1.1) !important;
    transform: scale(1.1) !important;
}

.cat-image-wrapper.playing {
    /* When clicked, do a crazy spin */
    -webkit-animation: catPlaySpin 0.8s ease-out;
    animation: catPlaySpin 0.8s ease-out;
}

/* Safari-specific keyframes for catPlay - ENHANCED WITH SPIN */
@-webkit-keyframes catPlaySpin {
    0% {
        -webkit-transform: translate3d(0, 0, 0) rotate(0deg) scale(1);
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1);
    }

    25% {
        -webkit-transform: translate3d(0, -20px, 0) rotate(90deg) scale(1.1);
        transform: translate3d(0, -20px, 0) rotate(90deg) scale(1.1);
    }

    50% {
        -webkit-transform: translate3d(0, -15px, 0) rotate(180deg) scale(1.05);
        transform: translate3d(0, -15px, 0) rotate(180deg) scale(1.05);
    }

    75% {
        -webkit-transform: translate3d(0, -8px, 0) rotate(270deg) scale(1.08);
        transform: translate3d(0, -8px, 0) rotate(270deg) scale(1.08);
    }

    100% {
        -webkit-transform: translate3d(0, 0, 0) rotate(360deg) scale(1);
        transform: translate3d(0, 0, 0) rotate(360deg) scale(1);
    }
}

@keyframes catPlaySpin {
    0% {
        -webkit-transform: translate3d(0, 0, 0) rotate(0deg) scale(1);
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1);
    }

    25% {
        -webkit-transform: translate3d(0, -20px, 0) rotate(90deg) scale(1.1);
        transform: translate3d(0, -20px, 0) rotate(90deg) scale(1.1);
    }

    50% {
        -webkit-transform: translate3d(0, -15px, 0) rotate(180deg) scale(1.05);
        transform: translate3d(0, -15px, 0) rotate(180deg) scale(1.05);
    }

    75% {
        -webkit-transform: translate3d(0, -8px, 0) rotate(270deg) scale(1.08);
        transform: translate3d(0, -8px, 0) rotate(270deg) scale(1.08);
    }

    100% {
        -webkit-transform: translate3d(0, 0, 0) rotate(360deg) scale(1);
        transform: translate3d(0, 0, 0) rotate(360deg) scale(1);
    }
}

/* OLD catPlay animation - keeping for compatibility */
@-webkit-keyframes catPlay {
    0% {
        -webkit-transform: translate3d(0, 0, 0) rotateZ(0deg) scale(1);
        transform: translate3d(0, 0, 0) rotateZ(0deg) scale(1);
    }

    25% {
        -webkit-transform: translate3d(0, -20px, 0) rotateZ(-10deg) scale(1.1);
        transform: translate3d(0, -20px, 0) rotateZ(-10deg) scale(1.1);
    }

    50% {
        -webkit-transform: translate3d(0, -15px, 0) rotateZ(10deg) scale(1.05);
        transform: translate3d(0, -15px, 0) rotateZ(10deg) scale(1.05);
    }

    75% {
        -webkit-transform: translate3d(0, -8px, 0) rotateZ(-5deg) scale(1.08);
        transform: translate3d(0, -8px, 0) rotateZ(-5deg) scale(1.08);
    }

    100% {
        -webkit-transform: translate3d(0, 0, 0) rotateZ(0deg) scale(1);
        transform: translate3d(0, 0, 0) rotateZ(0deg) scale(1);
    }
}

@keyframes catPlay {
    0% {
        -webkit-transform: translate3d(0, 0, 0) rotateZ(0deg) scale(1);
        transform: translate3d(0, 0, 0) rotateZ(0deg) scale(1);
    }

    25% {
        -webkit-transform: translate3d(0, -20px, 0) rotateZ(-10deg) scale(1.1);
        transform: translate3d(0, -20px, 0) rotateZ(-10deg) scale(1.1);
    }

    50% {
        -webkit-transform: translate3d(0, -15px, 0) rotateZ(10deg) scale(1.05);
        transform: translate3d(0, -15px, 0) rotateZ(10deg) scale(1.05);
    }

    75% {
        -webkit-transform: translate3d(0, -8px, 0) rotateZ(-5deg) scale(1.08);
        transform: translate3d(0, -8px, 0) rotateZ(-5deg) scale(1.08);
    }

    100% {
        -webkit-transform: translate3d(0, 0, 0) rotateZ(0deg) scale(1);
        transform: translate3d(0, 0, 0) rotateZ(0deg) scale(1);
    }
}

/* Ensure the cat GIF itself has hardware acceleration */
.cat-gif {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 0 !important;
    border: none !important;
    outline: none !important;
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    /* Force the image to render on GPU */
    will-change: transform;
    /* Prevent iOS from pausing the GIF */
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
}

/* iOS-specific fixes */
@supports (-webkit-touch-callout: none) {

    /* This targets iOS Safari specifically */
    .cat-image-wrapper {
        /* Even more aggressive hardware acceleration for iOS */
        -webkit-transform: translate3d(0, 0, 0) rotate(0deg);
        transform: translate3d(0, 0, 0) rotate(0deg);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    .cat-gif {
        /* Force iOS to render the GIF */
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
    }
}
